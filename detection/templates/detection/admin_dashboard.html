{% extends 'detection/base.html' %}
{% block content %}
<h1 class="mb-4">Admin Dashboard</h1>
<h3>Users</h3>
<table class="table table-dark table-striped">
    <thead>
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Date Joined</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.date_joined|date:"Y-m-d H:i" }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="3">No users found.</td></tr>
        {% endfor %}
    </tbody>
</table>
<h3>Test Results</h3>
<table class="table table-dark table-striped">
    <thead>
        <tr>
            <th>Cattle Tag</th>
            <th>User</th>
            <th>Test Date</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for result in test_results %}
            <tr>
                <td>{{ result.cattle.tag_number }}</td>
                <td>{{ result.user.username }}</td>
                <td>{{ result.tested_at|date:"Y-m-d H:i" }}</td>
                <td>{{ result.is_healthy|yesno:"Healthy,Infected" }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="4">No test results found.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}